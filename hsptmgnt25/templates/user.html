<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    

    <!-- NAVBAR TOP -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <a class="navbar-brand" href="#">Hello {{user_name}}</a>
            <div class="d-flex gap-3">

                {% if appointment and appointment|length > 0 %}
                    <span>Appointments: {{appointment|length}}</span>
                    <a class="btn btn-outline-success" href="/patient_history/{{appointment[0][2]}}">History</a>
                    
                {% endif %}
                <a class="btn btn-outline-primary" href="/editbypatient/{{user_id}}">Edit</a>
                <a class="btn btn-outline-danger" href="/login">Logout</a>
            </div>
        </div>
    </nav>
    <!-- NAVBAR TOP -->

    <br>

    <!-- DEPARTMENTS -->
    <div>
        <h3 style="margin-left: 10px;">Departments</h3>
    </div>

    <br>
    <table style="width: 95%; margin-left: 10px;">
        <tbody>
            <td style="text-align: center;"><h4>Department of Ophthalmology</h4></td>
            <td style="text-align: center;">
                <button onclick="window.location.href='/Ophthalmology'" type="button" class="btn btn-success">Details</button>
            </td>
        </tbody>

        <tbody>
            <td style="text-align: center;"><h4>Department of Gynecology</h4></td>
            <td style="text-align: center;">
                <button onclick="window.location.href='/Gynecology'" type="button" class="btn btn-success">Details</button>
            </td>
        </tbody>

        <tbody>
            <td style="text-align: center;"><h4>Department of Neurology</h4></td>
            <td style="text-align: center;">
                <button onclick="window.location.href='/Neurology'" type="button" class="btn btn-success">Details</button>
            </td>
        </tbody>

        <tbody>
            <td style="text-align: center;"><h4>Department of Orthopedics</h4></td>
            <td style="text-align: center;">
                <button onclick="window.location.href='/Orthopedics'" type="button" class="btn btn-success">Details</button>
            </td>
        </tbody>

        <tbody>
            <td style="text-align: center;"><h4>Department of ENT</h4></td>
            <td style="text-align: center;">
                <button onclick="window.location.href='/ENT'" type="button" class="btn btn-success">Details</button>
            </td>
        </tbody>
    </table>

    <br>

    <!-- UPCOMING APPOINTMENTS -->
    <div>
        <h3 style="margin-left: 10px;">Upcoming Appointments</h3>
    </div>

    <br>

    {% if appointment and appointment|length > 0 %}
    <table style="width: 90%; margin: auto;">
        <thead>
            <th><h4>Serial Number</h4></th>
            <th><h4>Doctor Name</h4></th>
            <th><h4>Department</h4></th>
            <th><h4>Day</h4></th>
            <th><h4>Slot</h4></th>
            <th><h4>Action</h4></th>
        </thead>

        <tbody>
        {% for app in appointment %}
            <tr>
                <td> <h5>{{app[0]}}</h5></td>
                <td> <h5>{{app[3]}}</h5></td>
                <td> <h5>{{app[5]}}</h5></td>
                <td> <h5>{{app[6]}}</h5></td>
                <td> <h5>{{app[7]}}</h5></td>
                <td>
    <form action="/cancel_appointment" method="POST">
        <input type="hidden" name="appointment_id" value="{{app[0]}}">
        <button type="submit" class="btn btn-danger btn-sm">Cancel</button>
    </form>
</td>


            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% else %}
    <p style="text-align:center; margin-top:20px;">No upcoming appointments.</p>
    {% endif %}
    <!-- UPCOMING APPOINTMENTS -->

</body>

</html>
