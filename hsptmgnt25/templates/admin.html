<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/style.css">
    <title>Admin</title>

</head>
<body>
<!-- NavBar -->
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand">Welcome Admin</a>
    <form  class="d-flex ms-auto" role="search" method = "get" action="{{ url_for('admin') }}" style="margin-right: 5px;">
      <input class="form-control me-2"  type="search" placeholder="Search" aria-label="Search" name="search" value="{{ request.args.get('search', '') }}">
      <button  class="btn btn-outline-dark" type="submit">Search</button>
      {% if search_query %}
      <a href="{{ url_for('admin') }}" class="btn btn-outline-secondary ms-2">Clear</a>
      {% endif %}
    </form>
    <a class="btn btn-outline-danger" style="width: fit-content;" href="/login">Logout</a>
  </div>

</nav>
<!-- NavBar finish -->



<!-- Table for registered doctors -->
<div  class="registered_doctors" style="   width: 50% ; text-align: center;margin: auto; padding: 2px; display: flex; align-items: center;justify-content: space-around;">
    <h3>Registered Doctors</h3> 
    <h3>Total Doctors = {{ total_doctors }}</h3>
</div>
<div style="margin-left: 10.25%;" >
    <form action="{{ url_for('doctoradd') }}" method="get" style="margin-left: 40%;">
    <button type="submit" style="background: #FFF2C6;" class="btn m-2" style="background:white;">Add a doctor</button></form>
</div>
<div style="max-height: 200px; overflow-y: auto; overflow-x: auto;">
    <table class="table" style="width: 95%; margin: auto;">
  <thead>
    <tr>
      <th scope="col" class="col-6">Doctor Name</th>
      <th scope="col" class="col-2">Edit</th>
      <th scope="col" class="col-2">Delete</th>
      <th scope="col" class="col-2">Blacklist</th>
    </tr>
  </thead>
  <tbody>
    {% for doctor in doctors %}
    <tr>
      <td scope="row"> {{doctor[1]}}</td>
      <td><a href="/edit_doctor/{{ doctor[0] }}" ><button type="button" class="btn btn-warning">Edit Doctor Info</button></a></td>
      <td><a href="/remove_doctor/{{ doctor[0] }}" ><button type="button" class="btn btn-danger">Remove Doctor</button></a></td><td>
        {% if doctor[6] == 'blacklisted' %}
            <a href="/unblacklist/{{ doctor[0] }}">
                <button type="button" class="btn btn-success">Unblacklist Doctor</button>
            </a>
        {% else %}
            <a href="/blacklist/{{ doctor[0] }}">
                <button type="button" class="btn btn-dark">Blacklist Doctor</button>
            </a>
        {% endif %}
      </td>
    </tr>
      {% endfor %}
  </tbody>
</table>

</div>

  <br> <br>



<!-- Table for registered patients -->
 <div class="registered_doctors" style=" width: 50% ; text-align: center;margin: auto; padding: 2px; display: flex; align-items: center;justify-content: space-around;">
    <h3>Registered Patinets</h3> <br>
    <h3>Total Patinets = {{ total_patients }}</h3>
</div>
    <div style="max-height: 200px; overflow-y: auto; overflow-x: auto;">
    <table class="table" style="width: 95%; margin: auto;">
  <thead >
    <tr>
      <th scope="col" class="col-6">Patient Name</th>
      <th scope="col" class="col-2">Edit</th>
      <th scope="col" class="col-2">Delete</th>
      <th scope="col" class="col-2">Blacklist</th>
    </tr>
  </thead>
  <tbody>
    {% for patient in patients %}

    <tr>
      <td scope="row">{{patient[1]}}
      </td>
        <td><a href="/edit_patient/{{ patient[0] }}" ><button type="button" class="btn btn-warning">Edit Patien Info</button></a></td>
      <td><a href="/remove_patient/{{ patient[0] }}" ><button type="button" class="btn btn-danger">Remove Patient</button></a></td>
      <td>
    {% if patient[5] == 'blacklisted' %}
        <a href="/unblacklist_patient/{{ patient[0] }}">
            <button type="button" class="btn btn-success">Unblacklist Patient</button>
        </a>
    {% else %}
        <a href="/blacklist_patient/{{ patient[0] }}">
            <button type="button" class="btn btn-dark">Blacklist Patient</button>
        </a>
    {% endif %}
</td>
    </tr>
    {% endfor %}

  </tbody>
</table>
    </div>

<br>

<!-- Table for registered patients -->
 
<!-- Table for upcomming patients -->
  <div class="registered_doctors" style=" width: 50% ; text-align: center;margin: auto; padding: 2px; display: flex; align-items: center;justify-content: space-around;">
    <h3>Upcoming Appointments</h3>
    <h3>Total Appointments = {{ total_appointments }}</h3>
  </div>  
<br>
<table class="table" style=" width: 95%; margin: auto; ">
  <thead>
    <tr>
      <th scope="col">Appointment number</th>
      <th scope="col">Patient Name</th>
      <th scope="col">Doctor Name</th>
      <th scope="col">Department</th>
      <th scope="col">Patient History</th>
    </tr>
  </thead>
  <tbody>
    {% for appointment in appointments %}

      <tr>
          <td>{{appointment[0]}}</td>
          <td>{{appointment[4]}}</td>
          <td>{{appointment[3]}}</td>
          <td>{{appointment[5]}}</td>
          <!-- {{ appointment[9] }} -->
          <!-- <td>View btn</td> -->
          <td>
    {% if appointment[9] == 'cancelled' or appointment[9] == 'Cancelled By Patient' %}
        <!-- <button class="btn btn-danger" disabled>Cancelled</button> -->
        <a href="{{ url_for('showpatienthistory', patient_id=appointment[2]) }}" class="btn btn-danger">Cancelled</a>


    {% elif appointment[9] == 'completed' or appointment[9] == 'Completed' %}
        <a href="{{ url_for('showpatienthistory', patient_id=appointment[2]) }}" class="btn btn-success">Completed</a>

    {% elif appointment[9] == 'booked' %}
        <a href="/view_appointment/{{ appointment[0] }}">
            <button class="btn btn-warning">View</button>
        </a>
        
    {% else %}
        <button class="btn btn-secondary" disabled>Unknown</button>
    {% endif %}
</td>



    </tr>
        {% endfor %}

  </tbody>
</table>







<!-- Table for upcomming patients -->





</body>
</html>